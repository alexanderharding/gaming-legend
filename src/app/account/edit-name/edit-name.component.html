<div class="py-3">
  <div
    *ngIf="loading"
    class="spinner-border text-primary"
    id="filterSpinner"
    role="status"
  >
    <span class="sr-only">Loading...</span>
  </div>
  <ngb-alert
    *ngIf="errorMessage"
    type="danger"
    [dismissible]="true"
    (close)="errorMessage = ''"
    class="text-center"
  >
    {{ errorMessage }}
  </ngb-alert>
  <form [formGroup]="editForm" (ngSubmit)="onSubmit(editForm, user)" novalidate>
    <ctacu-name-form
      [parentForm]="editForm"
      [submitted]="submitted"
      [user]="user"
    ></ctacu-name-form>
    <ctacu-current-password-form
      *ngIf="editForm.dirty"
      [parentForm]="editForm"
      [submitted]="submitted"
    ></ctacu-current-password-form>
    <div *ngIf="editForm.dirty" class="d-flex">
      <input
        type="submit"
        value="{{ editForm.invalid && submitted ? '! ' : '' }}Save"
        class="btn btn-sm"
        [disabled]="editForm.invalid && submitted"
        [ngClass]="{
          'btn-success': editForm.valid || !submitted,
          'btn-outline-danger': editForm.invalid && submitted
        }"
      />
      <input
        type="button"
        value="Cancel"
        class="btn btn-sm btn-danger ml-2"
        (click)="resetForm(user)"
      />
    </div>
  </form>
</div>
