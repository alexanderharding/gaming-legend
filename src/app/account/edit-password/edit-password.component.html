<form
  [formGroup]="editPasswordForm"
  (ngSubmit)="onSubmit(editPasswordForm, user)"
  novalidate
>
  <div class="card">
    <div class="card-header bg-info text-light">
      <span>Change Password</span>
    </div>
    <ngb-alert
      *ngIf="successMessage"
      type="success"
      [dismissible]="true"
      (close)="successMessage = ''"
      class="mb-0 mt-3 mx-3"
    >
      {{ successMessage }}
    </ngb-alert>
    <ngb-alert
      *ngIf="errorMessage"
      type="danger"
      [dismissible]="true"
      (close)="errorMessage = ''"
      class="mb-0 mt-3 mx-3"
    >
      {{ errorMessage }}
    </ngb-alert>
    <div class="card-body">
      <ctacu-current-password-form
        [parentForm]="editPasswordForm"
        [submitted]="submitted"
      ></ctacu-current-password-form>
      <ctacu-password-form
        [parentForm]="editPasswordForm"
        [submitted]="submitted"
        pageTitle="New Password"
      ></ctacu-password-form>
      <div class="d-flex">
        <input
          type="submit"
          value="{{ editPasswordForm.invalid && submitted ? '! ' : '' }}Save"
          class="btn"
          [disabled]="(editPasswordForm.invalid && submitted) || loading"
          [ngClass]="{
            'btn-success': editPasswordForm.valid || !submitted,
            'btn-outline-danger': editPasswordForm.invalid && submitted
          }"
        />
        <input
          *ngIf="editPasswordForm.touched || submitted"
          type="button"
          value="Cancel"
          class="btn btn-danger ml-2"
          [disabled]="loading"
          (click)="resetForm()"
        />
      </div>
    </div>
  </div>
</form>
